{% extends 'customer/base__next.html' %}
{% load static %}
{% load humanize %}

{% block inner__content %}
<section class="menu-detail">
  <div class="menu-top-view">
    {% if menu.img %}
      <img height=420 src="{{ menu.img.url }}" alt="Menu">
    {% endif %}

    {% include 'components/restaurant/modal/img.html' %}

    <div class="text-box px-sm-5 px-2 py-1">
      <p class="text-left">{{ menu.name }}</p>
      <p class="text-right">¥ {{ menu.price | intcomma }}</p>
    </div>

    {% include 'components/restaurant/modal/text.html' %}
  </div>

  <div class="px-2 py-3 menu-allergy">
    <div class="d-flex">
      <p class="text-left text__bold">アレルギー表示</p>
      <div class="ml-5">
        {% include 'components/restaurant/modal/allergy.html' %}
      </div>
    </div>
    <hr/>
    <div class="d-flex flex-wrap">
      {% for allergy in allergies %}
        {% if allergy in has_allergies %}
          <div class="allergy-box-brighten py-1 px-3 mr-1 mb-1">
            {{ allergy }}
          </div>
        {% else %}
          <div class="allergy-box py-1 px-3 mr-1 mb-1">
            {{ allergy }}
          </div>
        {% endif %}
      {% endfor %}

      {% include 'components/restaurant/modal/allergy_edit.html' %}
    </div>

    <!-- TODO: new feature -->

    <!-- <p class="mt-5 text-left text__bold">シェフからのコメント</p>
    <hr/>
    <div class="row mx-auto">
      <img class="col-4 shadow chef" src="#" alt="Comment from Chef">
      <div class="col-8 shadow comment"></div>
    </div>

    <p class="mt-5 text-left text__bold">生産者からのメッセージ</p>
    <hr/>
    <div class="row mx-auto">
    </div> -->

    {% if not user.is_authenticated %}
      <form class="cart-form" action="{% url 'customer:cart' %}" method="POST">{% csrf_token %}
        <div class="d-flex input__fixed justify-content-center align-items-center">
          <p class="text__bold plus-minus el__pointer" id="cartMinus">-</p>
          <input type="text" class="ml-4 mr-2 text__bold" value="1" id="cartNum" required readonly>
          <p class="pt-2 text__bold text__large">個</p>
          <p class="ml-4 text__bold plus-minus el__pointer" id="cartPlus">+</p>
        </div>
        <!-- hidden -->
        <input type="hidden" name="menu_id" value="{{ menu.id }}">
        <input type="hidden" name="random_code" value="{{ random_code }}">
        <input type="hidden" name="table" value="{{ table_num }}">
        <input type="hidden" name="direct" value="direct">
        <button type="submit" class="btn btn__orange btn__fixed-righter shadow">追加</button>
      </form>
    {% endif %}
  </div>
</section>
{% endblock %}
